<section>
    <div class="container">
        <div *ngFor="let post of posts">
            <div class="post my-3 rounded-4 shadow">
                <div class="text-center">
                    <p class="postTitle h3">{{post.title}}</p>
                    <p class="postTitle">{{post.description}}</p>
                </div>
                <div id="p_c{{post.id}}" class="carousel slide" [attr.data-bs-target]="'#p_c'+post.id">
                    <!-- OL Here -->
                    <div class="carousel-inner" role="listbox">
                        <div class="carousel-item active">
                            <img [src]="post.attachments[0].attachmentUrl" alt="{{post.title}}">
                        </div>
                        <div class="carousel-item" *ngFor="let attachments of post.attachments.slice(1,post.attachments.length);
                            let i = index">
                            <img [src]="attachments.attachmentUrl" alt="{{post.title}}">
                        </div>
                    </div>
                    <ng-container *ngIf="post.attachments.length>1">
                        <button class="carousel-control-prev" type="button" [attr.data-bs-target]="'#p_c'+post.id"
                            data-bs-slide="prev">
                            <span class="carousel-control-prev-icon" aria-hidden="true"></span>
                            <span class="visually-hidden">Previous</span>
                        </button>
                        <button class="carousel-control-next" type="button" [attr.data-bs-target]="'#p_c'+post.id"
                            data-bs-slide="next">
                            <span class="carousel-control-next-icon" aria-hidden="true"></span>
                            <span class="visually-hidden">Next</span>
                        </button>
                    </ng-container>
                </div>
                <div class="likes">
                    <span><i class="fa-regular fa-thumbs-up"></i> {{post.reactions.length}}</span>
                </div>
                <div class="comments">
                    <!-- Accordion -->
                    <div class="accordion accordion-flush" id="p_comm{{post.id}}">
                        <div class="accordion-item">
                            <h2 class="accordion-header">
                                <button class="accordion-button collapsed" type="button" data-bs-toggle="collapse"
                                    attr.data-bs-target="#p_comm_collapse{{post.id}}" aria-expanded="false"
                                    attr.aria-controls="p_comm_collapse{{post.id}}">
                                    <span class="text-center"> 
                                        <i class="fa fa-comment-alt"></i>
                                        {{post.comments.length}}
                                    </span>      
                                </button>
                            </h2>
                            <div id="p_comm_collapse{{post.id}}" class="accordion-collapse collapse"
                                attr.data-bs-parent="#p_comm{{post.id}}">
                                <div class="accordion-body">
                                    <ng-container *ngFor="let comment of post.comments">
                                        <div  class="comment">
                                            <p>{{comment.text}}</p>
                                        </div>
                                        <hr>
                                    </ng-container>
                                </div>
                            </div>
                        </div>
                        <!-- End Accordion -->
                    </div>
                </div>
            </div>
        </div>
    </div>
</section>


<!-- <ol class="carousel-indicators">
    <li [attr.data-bs-target]="'#c'+post.id" data-bs-slide-to="0" class="active" aria-current="true"
        aria-label="First Attachment"></li>
    <li *ngFor="let attachments of post.attachments.slice(1,post.attachments.length); let i = index"
    [attr.data-bs-target]="'#c'+post.id" [attr.data-bs-slide-to]="1+i" [attr.aria-label]="1+i + ' Attachment'">
    </li>
</ol> -->